# Маркетинговая аналитика Яндекс.Афиши


## Описание проекта
Вас пригласили на стажировку в отдел маркетинговой аналитики Яндекс.Афиши. Первое задание: помочь маркетологам снизить расходы — отказаться от невыгодных источников трафика и перераспределить бюджет.

Есть данные Яндекс.Афиши с июня 2017 по конец мая 2018 года:
* лог сервера с данными о посещениях сайта Яндекс.Афиши,
* выгрузка всех заказов за этот период,
* статистика рекламных расходов.

Вам предстоит изучить:
* как клиенты пользуются сервисом,
* когда делают первые покупки на сайте,
* сколько денег приносит компании каждый клиент,
* когда расходы на привлечение клиента окупаются.

Выручка измеряется в условных единицах — у.е.

## Шаг 1. Загрузите данные и подготовьте их к анализу

1.1. Положите данные о визитах, заказах и рекламных расходах в переменные;

1.2. Подготовьте данные. Убедитесь, что тип данных во всех колонках соответствует сохранённым в них значениям.

Файлы:

* визиты: `/datasets/visits_log.csv`
* заказы: `/datasets/orders_log.csv`
* расходы: `/datasets/costs.csv`

## Шаг 2. Рассчитайте метрики и постройте графики

Посчитайте метрики трёх видов:
* продуктовые,
* метрики электронной коммерции,
* маркетинговые.

Отобразите на графиках изменения каждой метрики во времени. Всякий раз старайтесь подобрать наиболее подходящий тип визуализации: в некоторых случаях может быть уместна тепловая карта когортного анализа.

После каждого пункта сформулируйте выводы.

## Как рассчитать метрики

### 2.1. Продуктовые метрики
* 2.1.1. Рассчитайте DAU, WAU и MAU. Вычислите средние значения этих метрик за весь период. Отобразите изменения метрик во времени на графиках;
* 2.1.2. Определите, сколько раз за день пользователи в среднем заходят на сайт. Постройте график, отражающий изменения метрики во времени;
* 2.1.3. Исследуйте, сколько времени пользователи проводят на сайте. Узнайте продолжительность типичной пользовательской сессии за весь период. Чтобы выбрать подходящую среднюю меру, постройте график распределения. Изменение продолжительности сессий во времени изучать необязательно;
* 2.1.4. Рассчитайте Retention Rate, применяя когортный анализ. Покажите изменения метрики во времени на графике. Найдите средний Retention Rate на второй месяц «жизни» когорт.

### 2.2. Метрики электронной коммерции

* 2.2.1. Исследуйте, сколько времени в среднем проходит с момента первого посещения сайта до совершения покупки. Изучать изменение этой метрики во времени необязательно;
* 2.2.2. Применяя когортный анализ или другой метод, рассчитайте среднее количество покупок на одного покупателя за определённый период, например за 6 месяцев. Изучать изменение этой метрики во времени необязательно;
* 2.2.3. Рассчитайте средний чек, применяя группировку по времени совершения покупки. Когортный анализ не подходит — он может исказить расчёты. Постройте график, отражающий изменения метрики во времени;
* 2.2.4. Выясните, как меняется LTV на покупателя по когортам. Помните, что LTV — накопительная метрика. Рассчитайте средний LTV по когортам за 6 месяцев; в расчёт включайте когорты, «прожившие» не менее 6 месяцев. Маржинальность сервиса — 100%. Отразите изменения метрики во времени на графике;

### 2.3. Маркетинговые метрики

Посчитайте и отобразите на графиках, как маркетинговые метрики различаются по рекламным источникам.

Один и тот же пользователь мог заходить на сайт из нескольких источников, поэтому важно определить «главный» источник для каждого и учитывать это в расчётах. Например, главным может стать первый источник перехода.

* 2.3.1. Посчитайте общую сумму расходов на маркетинг. Выясните, как траты распределены по источникам. Визуализируйте изменения метрик во времени;
* 2.3.2. Рассчитайте средний CAC на одного покупателя для всего проекта и для каждого источника трафика. Отразите изменения метрик на графиках;
* 2.3.3. Рассчитайте ROMI по когортам в разрезе источников. Сравните окупаемость за одинаковые периоды жизни когорт. Обратите внимание, что клиенты, пришедшие из разных источников, могут иметь разный LTV. Постройте графики, отражающие изменения метрик во времени.

## Шаг 3. Сформулируйте выводы и рекомендации

* 3.1. Определите источники трафика, на которые маркетологам стоит делать упор. Объясните свой выбор: на какие метрики вы ориентируетесь и почему;
* 3.2. Опишите выводы, которые вы сделали после подсчёта метрик каждого вида: маркетинговых, продуктовых и метрик электронной коммерции;
* 3.3. Подведите итоги когортного анализа. Определите самые перспективные для компании когорты клиентов;

## Оформлениe
Задание выполните в Jupyter Notebook. Код пишите в ячейках типа `code`, текстовые пояснения — в ячейках типа `markdown`. Применяйте форматирование и заголовки.

## Описание данных
В вашем распоряжении три датасета.
Файл `visits_log.csv` хранит лог сервера с информацией о посещениях сайта, `orders_log.csv` — информацию о заказах, а `costs.csv` — информацию о расходах на маркетинг.

### Структура `visits_log.csv`
* `Uid` — уникальный идентификатор пользователя,
* `Device` — категория устройства пользователя,
* `Start Ts` — дата и время начала сессии,
* `End Ts` — дата и время окончания сессии,
* `Source Id` — идентификатор источника перехода на сайт.

### Структура `orders_log.csv`
* `Uid` — уникальный идентификатор пользователя,
* `Buy Ts` — дата и время заказа,
* `Revenue` — сумма заказа.

### Структура `costs.csv`
* `source_id` — идентификатор рекламного источника,
* `dt` — дата проведения рекламной кампании,
* `costs` — расходы на эту кампанию.

## Критерии проверки
Шанс получить хорошую оценку выше, если вы:
* подготовили данные к анализу,
* выбрали подходящие типы визуализации,
* верно интерпретировали графики,
* правильно рассчитали и проанализировали метрики,
* аргументировали метриками рекомендации маркетологам,
* сформировали логичную структуру проекта,
* написали «чистый» и эффективный код,
* оставили комментарии,
* сделали корректные выводы.